---
/**
 * HighProteinHub — High Protein Authority Hub (T1)
 * Theme-aware: uses CSS custom properties
 */
import BaseLayout from '../layouts/BaseLayout.astro';
import HeaderNav from './HeaderNav.astro';
import FooterNav from './FooterNav.astro';
import FacetNav from './FacetNav.astro';

interface Props {
  title: string;
  description?: string;
  canonicalUrl?: string;
}

const { title, description, canonicalUrl } = Astro.props;

const facetGroups = [
  { title: 'By Diet', items: ['High Protein Vegan', 'Keto Protein Meals', 'Low Calorie Bands', 'Gluten-Free Macros', 'Dairy-Free Muscle'].map(v => ({ label: v, href: '#' })) },
  { title: 'By Method', items: ['Air Fryer Protein', 'Slow Cooker Batch', 'Instant Pot High-Pro', 'Microwave Survival', 'No-Cook Macros'].map(v => ({ label: v, href: '#' })) },
  { title: 'By Constraint', items: ['High Fiber Protein', 'Low Sodium Choices', 'Budget Protein Prep', 'Quick/Simple Macros', 'No-Microwave Lunch'].map(v => ({ label: v, href: '#' })) },
  { title: 'By Persona', items: ['Office Lunch Prep', 'College Student Gains', 'Postpartum Recovery', 'Bariatric Support', 'Picky Eater Hacks'].map(v => ({ label: v, href: '#' })) },
  { title: 'By Ingredient', items: ['Chicken Breast Prep', 'Ground Turkey Ideas', 'Wild Salmon Prep', 'Lean Steak Meals', 'Plant Protein Bases'].map(v => ({ label: v, href: '#' })) },
  { title: 'By Retailer', items: ["Trader Joe's List", 'Costco Bulk Protein', 'Aldi Finds Index', 'Walmart SKU Guide', 'Whole Foods Choice'].map(v => ({ label: v, href: '#' })) },
];
---

<BaseLayout title={title} description={description} canonicalUrl={canonicalUrl}>
  <HeaderNav
    brandLabel="Authority Pillar"
    brandName="PROTEINMEALS.CO"
    activeLink="/high-protein/"
    navLinks={[
      { href: '/high-protein/', label: 'High-Protein Hub' },
      { href: '/meal-prep/', label: 'MealPrepIdeas.co' },
      { href: '#', label: 'Store Index' },
      { href: '#', label: 'Chain Guide' },
    ]}
    statusText="LIVE FEED:"
    statusBadge="NEW TRADER JOE'S SKUS DETECTED"
  />

  <main class="flex-grow" x-data="{
    query: { goal: 'muscle-gain', diet: 'none', method: 'any', constraint: 'none' },
    get resultsCount() {
      let base = 842;
      if(this.query.goal !== 'muscle-gain') base -= 200;
      if(this.query.diet !== 'none') base -= 150;
      return base;
    }
  }">
    <!-- T1 HERO: MACRO INTENT PILLAR -->
    <section class="relative pt-24 pb-32 px-6 overflow-hidden" style="border-bottom: 1px solid var(--border-default);">
      <div class="max-w-7xl mx-auto relative z-10">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-end gap-12">
          <div class="flex-1">
            <div class="flex items-center gap-4 mb-8">
              <span class="px-3 py-1 text-[10px] font-black uppercase tracking-widest rounded"
                    style="background-color: var(--accent-primary); color: var(--text-inverse);">Pillar 02</span>
              <span class="text-[10px] font-black uppercase tracking-[0.4em]" style="color: var(--text-tertiary);">Optimizing Biological Output</span>
            </div>
            <h1 class="text-7xl md:text-9xl font-black tracking-tighter leading-[0.85] mb-8" style="color: var(--text-primary);">
              HIGH<br/><span style="color: var(--text-tertiary);">PROTEIN</span><br/>SYSTEMS
            </h1>
            <p class="max-w-xl text-lg font-medium leading-relaxed" style="color: var(--text-secondary);">
              The definitive data-layer for macro-intent. We map calorie bands, specific diet constraints, and retail availability to high-leverage protein sources.
            </p>
          </div>
          <!-- Macro Calculator Widget -->
          <div class="w-full md:w-96 p-8 rounded-3xl relative overflow-hidden group"
               style="background: var(--bg-secondary); border: 1px solid var(--border-default);">
            <div class="scanner-line"></div>
            <h3 class="text-xs font-black tracking-widest uppercase mb-6" style="color: var(--text-tertiary);">Target Macro Profile</h3>
            <div class="space-y-6" x-data="{ protein: 180 }">
              <div>
                <div class="flex justify-between text-[10px] font-black uppercase mb-2">
                  <span style="color: var(--text-tertiary);">Daily Protein Goal</span>
                  <span style="color: var(--accent-primary);" x-text="protein + 'G'"></span>
                </div>
                <input type="range" min="100" max="300" x-model="protein" class="w-full h-1 rounded-lg appearance-none cursor-pointer"
                       style="background: var(--bg-tertiary); accent-color: var(--accent-primary);" />
              </div>
              <div class="grid grid-cols-2 gap-4">
                <div class="p-4 rounded-xl" style="background: var(--bg-tertiary); border: 1px solid var(--border-default);">
                  <span class="block text-[10px] font-bold uppercase mb-1" style="color: var(--text-tertiary);">Calories</span>
                  <span class="text-xl font-black tabular-nums" style="color: var(--text-primary);">2,400</span>
                </div>
                <div class="p-4 rounded-xl" style="background: var(--bg-tertiary); border: 1px solid var(--border-default);">
                  <span class="block text-[10px] font-bold uppercase mb-1" style="color: var(--text-tertiary);">P:E Ratio</span>
                  <span class="text-xl font-black tabular-nums" style="color: var(--accent-primary);">2.4</span>
                </div>
              </div>
              <button class="theme-btn-primary w-full py-4 text-xs font-black uppercase tracking-widest rounded-xl">Lock Parameters</button>
            </div>
          </div>
        </div>
      </div>
      <div class="absolute top-0 right-0 w-1/3 h-full pointer-events-none" style="background: linear-gradient(to left, var(--accent-glow), transparent);"></div>
      <div class="absolute -bottom-24 -left-24 w-96 h-96 blur-[120px] rounded-full pointer-events-none" style="background: var(--accent-glow);"></div>
    </section>

    <!-- DECISION ENGINE -->
    <section class="py-24 px-6 max-w-7xl mx-auto">
      <div class="flex items-center gap-4 mb-12">
        <div class="h-[1px] flex-grow" style="background: var(--border-default);"></div>
        <h2 class="text-[10px] font-black uppercase tracking-[0.5em] whitespace-nowrap" style="color: var(--text-tertiary);">Decision Engine v1.0</h2>
        <div class="h-[1px] flex-grow" style="background: var(--border-default);"></div>
      </div>
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 items-stretch">
        <div class="lg:col-span-9 grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="p-8 rounded-3xl transition-all" style="background: var(--bg-secondary); border: 1px solid var(--border-default);">
            <label class="block text-[10px] font-black uppercase tracking-widest mb-6" style="color: var(--text-tertiary);">01. Primary Goal</label>
            <div class="flex flex-wrap gap-2">
              <template x-for="g in ['Weight-Loss', 'Muscle-Gain', 'Healthy']">
                <button x-on:click="query.goal = g"
                        x-bind:style="query.goal === g ? 'background: var(--accent-primary); color: var(--text-inverse); border-color: var(--accent-primary);' : 'color: var(--text-secondary); border-color: var(--border-default);'"
                        class="px-4 py-2 border rounded-full text-[11px] font-bold uppercase transition-all"
                        x-text="g.replace('-', ' ')"></button>
              </template>
            </div>
          </div>
          <div class="p-8 rounded-3xl transition-all" style="background: var(--bg-secondary); border: 1px solid var(--border-default);">
            <label class="block text-[10px] font-black uppercase tracking-widest mb-6" style="color: var(--text-tertiary);">02. Dietary Constraints</label>
            <select x-model="query.diet" class="w-full py-2 text-xl font-bold outline-none transition-all appearance-none cursor-pointer bg-transparent"
                    style="border-bottom: 2px solid var(--border-default); color: var(--text-primary);">
              <option value="none">No Restrictions</option>
              <option value="low-carb">Low Carb / Keto</option>
              <option value="vegan">Vegan / Plant-Based</option>
              <option value="gf-df">Gluten & Dairy Free</option>
              <option value="high-fiber">High Fiber Focused</option>
            </select>
          </div>
          <div class="p-8 rounded-3xl transition-all" style="background: var(--bg-secondary); border: 1px solid var(--border-default);">
            <label class="block text-[10px] font-black uppercase tracking-widest mb-6" style="color: var(--text-tertiary);">03. Logistics / Method</label>
            <div class="grid grid-cols-2 gap-3">
              <template x-for="m in ['Air Fryer', 'Crockpot', 'Microwave', 'Frozen SKUs']">
                <button class="p-3 rounded-xl text-[10px] font-bold uppercase text-left flex justify-between items-center group transition-colors"
                        style="border: 1px solid var(--border-default); color: var(--text-secondary);">
                  <span x-text="m"></span>
                  <span class="w-1.5 h-1.5 rounded-full" style="background: var(--text-tertiary);"></span>
                </button>
              </template>
            </div>
          </div>
          <div class="p-8 rounded-3xl transition-all" style="background: var(--bg-secondary); border: 1px solid var(--border-default);">
            <label class="block text-[10px] font-black uppercase tracking-widest mb-6" style="color: var(--text-tertiary);">04. Retail Preference</label>
            <div class="flex items-center gap-4">
              <div class="flex -space-x-3">
                {['TJ', 'CO', 'WM', 'AL'].map(abbr => (
                  <div class="w-10 h-10 rounded-full flex items-center justify-center text-[10px] font-bold"
                       style="background: var(--bg-tertiary); border: 2px solid var(--bg-primary); color: var(--text-primary);">{abbr}</div>
                ))}
              </div>
              <span class="text-[10px] font-bold uppercase tracking-widest" style="color: var(--text-tertiary);">Filter by store inventory</span>
            </div>
          </div>
        </div>
        <div class="lg:col-span-3 rounded-3xl p-8 flex flex-col justify-between items-center text-center"
             style="background-color: var(--accent-primary); color: var(--text-inverse);">
          <div>
            <span class="text-[10px] font-black uppercase tracking-[0.3em] mb-4 block opacity-60">Engine Match</span>
            <div class="text-8xl font-black tracking-tighter tabular-nums" x-text="resultsCount">842</div>
            <span class="font-bold uppercase text-[10px] tracking-widest">Available Strategies</span>
          </div>
          <button class="w-full py-5 rounded-2xl font-black uppercase tracking-widest text-xs hover:scale-[1.02] active:scale-[0.98] transition-all"
                  style="background: var(--text-primary); color: var(--bg-primary);">View Results →</button>
        </div>
      </div>
    </section>

    <!-- TOP CLUSTERS -->
    <section class="py-24 px-6" style="border-top: 1px solid var(--border-default); background: var(--bg-tertiary);">
      <div class="max-w-7xl mx-auto">
        <div class="flex justify-between items-end mb-16">
          <div>
            <h2 class="text-4xl md:text-5xl font-black tracking-tighter mb-4" style="color: var(--text-primary);">AUTHORITY PACKS</h2>
            <p class="font-medium" style="color: var(--text-secondary);">Pre-indexed collections of high-intent high-protein strategies.</p>
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <!-- Retail Frozen -->
          <a href="#" class="hyper-border p-8 rounded-[2rem] flex flex-col justify-between min-h-[450px] group overflow-hidden">
            <div class="relative z-10">
              <div class="flex justify-between items-start mb-8">
                <span class="px-2 py-1 text-[9px] font-black uppercase tracking-widest rounded"
                      style="background: var(--bg-tertiary); color: var(--text-primary);">SKU Index</span>
                <span class="text-xs font-black" style="color: var(--accent-primary);">150+ PGS</span>
              </div>
              <h3 class="text-3xl font-black tracking-tighter mb-4 leading-none" style="color: var(--text-primary);">Frozen High-Protein Deep-Dive</h3>
              <p class="text-sm font-medium leading-relaxed" style="color: var(--text-secondary);">Trader Joe's, Costco, and Walmart frozen SKUs sorted by absolute protein-to-calorie efficiency.</p>
            </div>
            <div class="relative z-10 pt-8 mt-8 flex justify-between items-center" style="border-top: 1px solid var(--border-default);">
              <span class="text-[10px] font-black uppercase tracking-widest" style="color: var(--text-tertiary);">Retail Facet</span>
            </div>
          </a>
          <!-- Fast Food -->
          <a href="#" class="hyper-border p-8 rounded-[2rem] flex flex-col justify-between min-h-[450px] group overflow-hidden"
             style="background: var(--bg-tertiary);">
            <div class="relative z-10">
              <div class="flex justify-between items-start mb-8">
                <span class="px-2 py-1 text-[9px] font-black uppercase tracking-widest rounded"
                      style="background: var(--text-primary); color: var(--bg-primary);">Chain Hacks</span>
                <span class="text-xs font-black" style="color: var(--text-primary);">94% ACCURACY</span>
              </div>
              <h3 class="text-3xl font-black tracking-tighter mb-4 leading-none" style="color: var(--text-primary);">Fast Food Macro Modification</h3>
              <p class="text-sm font-medium leading-relaxed" style="color: var(--text-secondary);">How to hack Chick-Fil-A, Chipotle, and Panda Express for 50g+ protein under 600 cals.</p>
            </div>
            <div class="relative z-10 space-y-3 mt-8">
              <div class="flex flex-wrap gap-2">
                {['Chipotle', 'Chick-Fil-A', 'Panera'].map(chain => (
                  <span class="px-2 py-1 rounded text-[9px] font-bold uppercase"
                        style="border: 1px solid var(--border-default); color: var(--text-primary);">{chain}</span>
                ))}
              </div>
              <div class="w-full h-1.5 rounded-full overflow-hidden" style="background: var(--border-default);">
                <div class="w-3/4 h-full" style="background: var(--text-primary);"></div>
              </div>
            </div>
          </a>
          <!-- Clinical -->
          <a href="#" class="hyper-border p-8 rounded-[2rem] flex flex-col justify-between min-h-[450px] group overflow-hidden"
             style="border-left: 4px solid var(--accent-primary);">
            <div class="relative z-10">
              <div class="flex justify-between items-start mb-8">
                <span class="px-2 py-1 text-[9px] font-black uppercase tracking-widest rounded"
                      style="background: var(--bg-tertiary); color: var(--text-primary);">Trust Tier</span>
                <span class="text-[9px] font-black uppercase tracking-widest" style="color: var(--text-tertiary);">High Retention</span>
              </div>
              <h3 class="text-3xl font-black tracking-tighter mb-4 leading-none" style="color: var(--text-primary);">Biological & Health Targets</h3>
              <p class="text-sm font-medium leading-relaxed" style="color: var(--text-secondary);">Protein-forward protocols for PCOS management, bariatric recovery, and cholesterol control.</p>
            </div>
            <div class="relative z-10 mt-8 grid grid-cols-2 gap-4">
              <div class="text-center p-3 rounded-xl" style="background: var(--bg-tertiary); border: 1px solid var(--border-default);">
                <span class="block text-xl font-black" style="color: var(--text-primary);">8.2k</span>
                <span class="text-[8px] uppercase font-bold" style="color: var(--text-tertiary);">Daily Users</span>
              </div>
              <div class="text-center p-3 rounded-xl" style="background: var(--bg-tertiary); border: 1px solid var(--border-default);">
                <span class="block text-xl font-black" style="color: var(--text-primary);">98%</span>
                <span class="text-[8px] uppercase font-bold" style="color: var(--text-tertiary);">Stickiness</span>
              </div>
            </div>
          </a>
        </div>
      </div>
    </section>

    <!-- FACET MEGA-NAV -->
    <FacetNav layout="columns" sectionTitle="Global Taxonomy Explorer" groups={facetGroups} />

    <!-- 5-DAY PROTOCOL -->
    <section class="py-24 overflow-hidden relative" style="background-color: var(--accent-primary); color: var(--text-inverse);">
      <div class="px-6 max-w-7xl mx-auto flex flex-col md:flex-row gap-16 items-center">
        <div class="flex-1 relative z-10">
          <div class="flex items-center gap-2 mb-6">
            <div class="w-10 h-[2px]" style="background: var(--text-inverse);"></div>
            <span class="text-[10px] font-black uppercase tracking-widest">The High Protein Standard</span>
          </div>
          <h2 class="text-6xl md:text-8xl font-black tracking-tighter leading-[0.85] mb-8 uppercase">THE 200G<br/>PROTOCOL</h2>
          <p class="text-xl font-medium mb-12 opacity-80 max-w-lg">
            The ultimate execution plan. 5 days, 200g protein daily, under 2400 calories. Sunday prep: 105 mins.
          </p>
          <div class="flex flex-wrap gap-4">
            <button class="px-10 py-5 text-xs font-black uppercase tracking-widest rounded-full hover:scale-105 transition-transform"
                    style="background: var(--text-primary); color: var(--bg-primary);">Download Plan (PDF)</button>
            <button class="px-10 py-5 text-xs font-black uppercase tracking-widest rounded-full transition-all"
                    style="border: 2px solid var(--text-inverse);">View Batch Guide</button>
          </div>
        </div>
        <div class="flex-1 relative">
          <div class="p-10 rounded-3xl rotate-2"
               style="background: var(--bg-secondary); border: 2px solid var(--text-primary); box-shadow: 20px 20px 0px 0px var(--text-primary);">
            <div class="flex justify-between items-center mb-10 pb-4" style="border-bottom: 1px solid var(--border-default);">
              <span class="text-xs font-black tracking-widest" style="color: var(--text-primary);">EXECUTION STEPS</span>
              <span class="px-2 py-1 text-[9px] font-black uppercase" style="background: var(--text-primary); color: var(--bg-primary);">LIVE v2.4</span>
            </div>
            <div class="space-y-6">
              {[
                { step: '01', text: 'Batch cook 5lbs Lean Protein (Turkey/Chicken) with signature spice blend.' },
                { step: '02', text: 'Partition 1.5 cups roasted cruciferous vegetables across 10 glass containers.' },
                { step: '03', text: 'Apply calorie-dense sauces (substitute for Greek Yogurt base).', strikethrough: true },
              ].map(item => (
                <div class="flex items-start gap-4">
                  <span class="w-6 h-6 rounded-full text-[10px] flex items-center justify-center flex-shrink-0 font-black"
                        style="background: var(--text-primary); color: var(--bg-primary);">{item.step}</span>
                  <p class="text-sm font-bold leading-tight"
                     style={item.strikethrough ? 'color: var(--text-tertiary); text-decoration: line-through;' : `color: var(--text-primary);`}>{item.text}</p>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <FooterNav
    brandName="PROTEINMEALS.CO"
    brandDescription="The macro-intent pillar of the Authority Network. Structural data for automated high-protein nutrition."
    copyrightSuffix="Authority Network. Built for Biological Optimization."
  />
</BaseLayout>
