---
/**
 * FacetNav â€” Chip-based facet navigation
 * Used on hub pages (T1) and category pages (T2) for filtering/browsing
 */
interface FacetGroup {
  title: string;
  items: { label: string; href: string; active?: boolean }[];
}

interface Props {
  /** Simple chip list mode */
  chips?: { label: string; href: string }[];
  /** Grouped column mode */
  groups?: FacetGroup[];
  /** Section title */
  sectionTitle?: string;
  /** Badge text */
  badge?: string;
  /** Layout: 'chips' | 'columns' */
  layout?: 'chips' | 'columns';
}

const {
  chips = [],
  groups = [],
  sectionTitle = 'Browse Global Facets',
  badge,
  layout = 'chips',
} = Astro.props;
---

{layout === 'chips' ? (
  <section class="border-y border-zinc-900 bg-zinc-950 py-12">
    <div class="px-6 max-w-7xl mx-auto">
      <div class="flex items-center justify-between mb-8">
        <h4 class="text-xs font-black tracking-[0.3em] text-zinc-500 uppercase">{sectionTitle}</h4>
        {badge && (
          <span class="text-[10px] font-black uppercase bg-[#D9FF00] text-black px-3 py-1 rounded">{badge}</span>
        )}
      </div>
      <div class="flex flex-wrap gap-3">
        {chips.map((chip) => (
          <a href={chip.href} class="hyper-border px-4 py-2 text-[11px] font-bold uppercase tracking-widest hover:text-[#D9FF00] flex items-center gap-3 rounded">
            <span class="w-1.5 h-1.5 bg-zinc-800"></span>
            <span>{chip.label}</span>
          </a>
        ))}
      </div>
    </div>
  </section>
) : (
  <section class="bg-black py-24 border-y border-zinc-900 overflow-hidden">
    <div class="px-6 max-w-7xl mx-auto">
      <div class="flex flex-col md:flex-row md:items-end justify-between mb-16 gap-8">
        <div>
          <h2 class="text-xs font-black tracking-[0.5em] uppercase text-zinc-500 mb-4 italic">The Global Index</h2>
          <h3 class="text-5xl font-black tracking-tighter leading-none uppercase">{sectionTitle}</h3>
        </div>
        {badge && (
          <div class="flex gap-2">
            <span class="text-[10px] font-black uppercase bg-[#D9FF00] text-black px-3 py-1 rounded">{badge}</span>
          </div>
        )}
      </div>
      <div class:list={['grid gap-12', groups.length <= 4 ? 'grid-cols-2 md:grid-cols-4' : 'grid-cols-2 md:grid-cols-4 lg:grid-cols-6']}>
        {groups.map((group) => (
          <div>
            <h4 class="text-[10px] font-black uppercase tracking-widest text-zinc-700 mb-6 border-b border-zinc-900 pb-2">{group.title}</h4>
            <ul class="space-y-3">
              {group.items.map((item) => (
                <li>
                  <a
                    href={item.href}
                    class:list={[
                      'text-xs font-bold transition-colors',
                      item.active ? 'text-[#D9FF00]' : 'text-zinc-500 hover:text-[#D9FF00]',
                    ]}
                  >
                    {item.label}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </div>
  </section>
)}
