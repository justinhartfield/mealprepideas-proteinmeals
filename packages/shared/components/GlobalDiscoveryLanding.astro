---
/**
 * GlobalDiscoveryLanding â€” Homepage / Entry Portal
 * Theme-aware: uses CSS custom properties for light/dark support
 */
import BaseLayout from '../layouts/BaseLayout.astro';
import HeaderNav from './HeaderNav.astro';
import FooterNav from './FooterNav.astro';
import FacetNav from './FacetNav.astro';

interface Props {
  title: string;
  description?: string;
}

const { title, description } = Astro.props;

const facetChips = [
  'Crockpot', 'Slow-Cooker', 'Trader Joes', 'Costco', 'Weight-Loss',
  'Postpartum', 'High Fiber', 'Budget', 'Chicken', 'Salmon',
  'Low-Sodium', 'Air-Fryer', 'Walmart', 'Chick-Fil-A', 'Bariatric', 'College',
].map(label => ({ label, href: '#' }));
---

<BaseLayout title={title} description={description}>
  <HeaderNav />

  <main class="flex-grow" x-data="{ activeHub: 'all', openFilter: false }">
    <!-- HERO: GATEWAY MODULE -->
    <section class="relative min-h-[70vh] flex flex-col md:flex-row overflow-hidden"
             style="border-bottom: 1px solid var(--border-default);">
      <!-- PORTAL 1: MEAL PREP -->
      <a href="/meal-prep/"
         x-on:mouseenter="activeHub = 'meal-prep'"
         x-on:mouseleave="activeHub = 'all'"
         class="relative flex-1 group transition-all duration-700 ease-out flex flex-col justify-end p-12 overflow-hidden"
         style="border-right: 1px solid var(--border-default);"
         x-bind:class="activeHub === 'high-protein' ? 'opacity-30' : 'opacity-100'">
        <div class="absolute inset-0 transition-colors" style="background-color: var(--bg-secondary);"></div>
        <img src="https://images.unsplash.com/photo-1547592166-23ac45744acd?auto=format&fit=crop&q=80&w=1200"
             class="absolute inset-0 w-full h-full object-cover mix-blend-overlay opacity-20 group-hover:opacity-40 transition-opacity duration-700" alt="Meal Prep" />
        <div class="relative z-10">
          <span class="text-xs font-bold tracking-[0.5em] block mb-4" style="color: var(--accent-primary);">OPTIMIZE LOGISTICS</span>
          <h2 class="text-6xl md:text-8xl font-black tracking-tighter mb-4 leading-none" style="color: var(--text-primary);">MEAL<br/>PREP</h2>
          <p class="max-w-xs font-medium text-sm leading-relaxed mb-8" style="color: var(--text-secondary);">Batching, logistics, storage, and 5-day protocols for high-performance living.</p>
          <div class="flex gap-2">
            {['Crockpot', 'No-Cook', 'Freezer'].map(tag => (
              <span class="px-3 py-1 rounded-full text-[10px] uppercase font-bold tracking-widest transition-colors"
                    style="border: 1px solid var(--border-default); color: var(--text-secondary);">{tag}</span>
            ))}
          </div>
        </div>
        <div class="scanner-line opacity-0 group-hover:opacity-100"></div>
      </a>

      <!-- PORTAL 2: HIGH PROTEIN -->
      <a href="/high-protein/"
         x-on:mouseenter="activeHub = 'high-protein'"
         x-on:mouseleave="activeHub = 'all'"
         class="relative flex-1 group transition-all duration-700 ease-out flex flex-col justify-end p-12 overflow-hidden"
         x-bind:class="activeHub === 'meal-prep' ? 'opacity-30' : 'opacity-100'">
        <div class="absolute inset-0 transition-colors" style="background-color: var(--bg-secondary);"></div>
        <img src="https://images.unsplash.com/photo-1532550907401-a500c9a57435?auto=format&fit=crop&q=80&w=1200"
             class="absolute inset-0 w-full h-full object-cover mix-blend-overlay opacity-20 group-hover:opacity-40 transition-opacity duration-700" alt="High Protein" />
        <div class="relative z-10">
          <span class="text-xs font-bold tracking-[0.5em] block mb-4" style="color: var(--accent-primary);">OPTIMIZE MACROS</span>
          <h2 class="text-6xl md:text-8xl font-black tracking-tighter mb-4 leading-none" style="color: var(--text-primary);">HIGH<br/>PROTEIN</h2>
          <p class="max-w-xs font-medium text-sm leading-relaxed mb-8" style="color: var(--text-secondary);">Muscle gain, weight loss, and fast-food survival guides with hard calorie bands.</p>
          <div class="flex gap-2">
            {['Weight Loss', 'Muscle Gain', 'Bariatric'].map(tag => (
              <span class="px-3 py-1 rounded-full text-[10px] uppercase font-bold tracking-widest transition-colors"
                    style="border: 1px solid var(--border-default); color: var(--text-secondary);">{tag}</span>
            ))}
          </div>
        </div>
        <div class="scanner-line opacity-0 group-hover:opacity-100"></div>
      </a>
    </section>

    <!-- SEARCH & SOLVE WIDGET -->
    <section class="py-20 px-6 max-w-7xl mx-auto" x-data="{ goal: 'Weight Loss', method: 'Air Fryer', diet: 'Low Carb' }">
      <div class="flex flex-col md:flex-row items-end justify-between mb-12 gap-8">
        <div class="max-w-xl">
          <div class="flex items-center gap-4 mb-4">
            <div class="h-[1px] w-12" style="background-color: var(--accent-primary);"></div>
            <span class="text-[10px] uppercase font-black tracking-widest" style="color: var(--accent-primary);">Smart Query Engine</span>
          </div>
          <h3 class="text-4xl font-black tracking-tight leading-none mb-4" style="color: var(--text-primary);">SYSTEMATIC SELECTION</h3>
          <p class="font-medium" style="color: var(--text-secondary);">Use the inventory controls below to generate a precise meal protocol matching your biological and logistical constraints.</p>
        </div>
        <div class="text-right">
          <span class="text-[40px] font-black tabular-nums tracking-tighter block leading-none" style="color: var(--text-primary);">1,248</span>
          <span class="text-[10px] font-bold uppercase tracking-widest" style="color: var(--text-secondary);">Available Strategies</span>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-4 p-4 rounded-2xl"
           style="background: var(--bg-tertiary); border: 1px solid var(--border-default);">
        <div class="p-6 rounded-xl flex flex-col justify-between transition-all"
             style="background: var(--select-bg); border: 1px solid var(--select-border);">
          <label class="text-[10px] font-black uppercase tracking-widest mb-6 block" style="color: var(--text-tertiary);">01. Primary Goal</label>
          <select x-model="goal" class="bg-transparent text-xl font-bold tracking-tight outline-none w-full appearance-none cursor-pointer" style="color: var(--text-primary);">
            <option>Weight Loss</option>
            <option>Muscle Gain</option>
            <option>Healthy (General)</option>
          </select>
        </div>
        <div class="p-6 rounded-xl flex flex-col justify-between transition-all"
             style="background: var(--select-bg); border: 1px solid var(--select-border);">
          <label class="text-[10px] font-black uppercase tracking-widest mb-6 block" style="color: var(--text-tertiary);">02. Method</label>
          <select x-model="method" class="bg-transparent text-xl font-bold tracking-tight outline-none w-full appearance-none cursor-pointer" style="color: var(--text-primary);">
            <option>Air Fryer</option>
            <option>Crockpot</option>
            <option>No-Cook</option>
            <option>Microwave</option>
            <option>Instant Pot</option>
          </select>
        </div>
        <div class="p-6 rounded-xl flex flex-col justify-between transition-all"
             style="background: var(--select-bg); border: 1px solid var(--select-border);">
          <label class="text-[10px] font-black uppercase tracking-widest mb-6 block" style="color: var(--text-tertiary);">03. Diet Type</label>
          <select x-model="diet" class="bg-transparent text-xl font-bold tracking-tight outline-none w-full appearance-none cursor-pointer" style="color: var(--text-primary);">
            <option>Low Carb</option>
            <option>Vegan</option>
            <option>High Protein</option>
            <option>Gluten Free</option>
          </select>
        </div>
        <button class="theme-btn-cta rounded-xl p-6 flex flex-col items-center justify-center transition-all group overflow-hidden relative">
          <span class="relative z-10 text-xl font-black uppercase tracking-tight">Generate Index</span>
          <span class="relative z-10 text-[10px] font-bold opacity-60">MATCHING DATA POINTS</span>
        </button>
      </div>
    </section>

    <!-- FACET MEGA-NAV (CHIPS) -->
    <FacetNav chips={facetChips} />

    <!-- TOP CLUSTERS (BENTO GRID) -->
    <section class="py-24 px-6 max-w-7xl mx-auto">
      <h4 class="text-4xl font-black tracking-tighter mb-12" style="color: var(--text-primary);">FEATURED AUTHORITY PACKS</h4>
      <div class="grid grid-cols-1 md:grid-cols-12 gap-6">
        <!-- PACK A: HIGH PROTEIN FROZEN -->
        <div class="md:col-span-8 hyper-border rounded-3xl p-8 min-h-[400px] flex flex-col justify-between group overflow-hidden relative">
          <img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&q=80&w=1200"
               class="absolute inset-0 w-full h-full object-cover opacity-10 group-hover:scale-105 transition-transform duration-700" alt="Frozen Meals" />
          <div>
            <div class="flex gap-2 mb-6">
              <span class="text-[10px] font-black px-2 py-0.5 rounded uppercase" style="background-color: var(--accent-primary); color: var(--text-inverse);">Pack 01</span>
              <span class="text-[10px] font-black px-2 py-0.5 rounded uppercase" style="background: var(--bg-tertiary); color: var(--text-primary);">150+ Pages</span>
            </div>
            <h5 class="text-5xl font-black tracking-tighter mb-4 leading-none" style="color: var(--text-primary);">High-Protein<br/>Frozen Index</h5>
            <p class="max-w-sm font-medium" style="color: var(--text-secondary);">Trader Joe's, Costco, and Walmart SKU deep-dives sorted by macro-density.</p>
          </div>
          <div class="flex items-center justify-between mt-8 relative z-10">
            <div class="flex -space-x-3">
              {['TJ', 'AL', 'WM'].map(abbr => (
                <div class="w-10 h-10 rounded-full flex items-center justify-center text-[10px] font-bold"
                     style="background: var(--bg-tertiary); border: 2px solid var(--bg-primary); color: var(--text-primary);">{abbr}</div>
              ))}
            </div>
            <a href="#" class="text-[10px] font-black uppercase tracking-[0.2em] transition-colors flex items-center gap-2" style="color: var(--text-secondary);">
              View Full Pack <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
            </a>
          </div>
        </div>

        <!-- PACK B: POSTPARTUM -->
        <div class="md:col-span-4 rounded-3xl p-8 flex flex-col justify-between group"
             style="background-color: var(--accent-primary); color: var(--text-inverse); border: 1px solid var(--border-default);">
          <div>
            <div class="flex gap-2 mb-6">
              <span class="text-[10px] font-black px-2 py-0.5 rounded uppercase"
                    style="background: var(--text-primary); color: var(--bg-primary);">High Sticky</span>
            </div>
            <h5 class="text-3xl font-black tracking-tighter mb-4 leading-tight">Postpartum<br/>Freezer Stash</h5>
            <p class="font-medium text-sm opacity-70">Targeted recovery nutrition for new mothers. High-fiber, anti-inflammatory protocols.</p>
          </div>
          <div class="mt-8">
            <a href="#" class="w-full py-4 rounded-xl font-black uppercase text-xs tracking-widest flex items-center justify-center transition-colors"
               style="background: var(--text-primary); color: var(--bg-primary);">
              Explore Vault
            </a>
          </div>
        </div>

        <!-- PACK C: NO MICROWAVE -->
        <div class="md:col-span-4 hyper-border rounded-3xl p-8 flex flex-col justify-between group">
          <div class="mb-8">
            <span class="text-[10px] font-black uppercase tracking-widest mb-4 block" style="color: var(--text-tertiary);">Persona: Office</span>
            <h5 class="text-3xl font-black tracking-tighter leading-tight" style="color: var(--text-primary);">No-Microwave Work Lunches</h5>
          </div>
          <div class="space-y-4">
            <div class="flex justify-between items-center text-xs font-bold pb-2" style="border-bottom: 1px solid var(--border-default);">
              <span style="color: var(--text-tertiary);">Constraint</span>
              <span style="color: var(--text-primary);">Cold / Ambient</span>
            </div>
            <div class="flex justify-between items-center text-xs font-bold pb-2" style="border-bottom: 1px solid var(--border-default);">
              <span style="color: var(--text-tertiary);">Protein Min</span>
              <span style="color: var(--text-primary);">35g / serving</span>
            </div>
          </div>
        </div>

        <!-- PACK D: FAST FOOD MATRIX -->
        <div class="md:col-span-8 rounded-3xl p-8 flex flex-col md:flex-row gap-8 items-center"
             style="background: var(--bg-secondary); border: 1px solid var(--border-default);">
          <div class="flex-1">
            <h5 class="text-4xl font-black tracking-tighter mb-4" style="color: var(--text-primary);">Fast-Food Chain Modification Guides</h5>
            <p class="text-sm mb-6" style="color: var(--text-secondary);">How to hack Chick-Fil-A, McDonalds, and Chipotle for maximum protein with zero sauce-slop.</p>
            <div class="flex flex-wrap gap-2">
              {['PANERA', 'CHIPOTLE', 'PANDA EXPRESS', 'TACO BELL'].map(chain => (
                <span class="text-[9px] font-black px-2 py-1 rounded" style="border: 1px solid var(--border-default); color: var(--text-primary);">{chain}</span>
              ))}
            </div>
          </div>
          <div class="w-full md:w-48 h-48 rounded-2xl flex items-center justify-center p-4"
               style="background: var(--bg-tertiary);">
            <div class="w-full h-full rounded-xl flex flex-col items-center justify-center text-center"
                 style="border: 2px dashed var(--border-default);">
              <span class="text-4xl font-black tracking-tighter" style="color: var(--text-primary);">94%</span>
              <span class="text-[8px] font-bold uppercase tracking-widest" style="color: var(--text-tertiary);">Accuracy Data</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FEATURED PLANS (5-DAY PROTOCOL) -->
    <section class="py-24 overflow-hidden" style="background: var(--bg-secondary);">
      <div class="px-6 max-w-7xl mx-auto flex flex-col md:flex-row gap-16 items-center">
        <div class="flex-1">
          <span class="text-[10px] font-black tracking-[0.5em] uppercase mb-4 block" style="color: var(--text-tertiary);">Retention Module</span>
          <h2 class="text-6xl md:text-8xl font-black tracking-tighter leading-[0.8] mb-8" style="color: var(--text-primary);">THE 5-DAY<br/>PROTOCOL</h2>
          <p class="text-xl font-medium mb-8" style="color: var(--text-secondary);">Download the Sunday Prep Execution Plan. 90 minutes of work for 15 high-protein meals.</p>
          <div class="flex gap-4">
            <button class="theme-btn-primary px-8 py-4 rounded-full font-black uppercase text-xs tracking-widest hover:scale-105 transition-transform">Get The Plan</button>
            <button class="px-8 py-4 rounded-full font-black uppercase text-xs tracking-widest transition-all"
                    style="border: 2px solid var(--text-primary); color: var(--text-primary);">Preview Steps</button>
          </div>
        </div>
        <div class="flex-1 relative">
          <div class="p-8 rounded-3xl rotate-3 shadow-2xl relative z-10"
               style="background: var(--bg-tertiary); border: 1px solid var(--border-default);">
            <div class="flex items-center justify-between mb-8 pb-4" style="border-bottom: 1px solid var(--border-default);">
              <span class="text-xs font-black tracking-widest" style="color: var(--text-primary);">SHOPPING LIST</span>
              <span class="text-xs font-bold" style="color: var(--text-tertiary);">#P-0042</span>
            </div>
            <div class="space-y-4">
              {[
                { text: '2.5lbs Lean Ground Turkey', done: false },
                { text: '3x Bell Peppers (Red/Yellow)', done: false },
                { text: '1x Large Bag Baby Spinach', done: false },
                { text: 'Low-Sodium Soy Sauce', done: true },
              ].map(item => (
                <div class="flex items-center gap-4">
                  <div class="w-4 h-4 rounded" style={`border: 2px solid var(--border-strong); ${item.done ? 'background: var(--text-primary);' : ''}`}></div>
                  <span class="text-sm font-bold" style={item.done ? 'color: var(--text-tertiary); text-decoration: line-through;' : `color: var(--text-primary);`}>{item.text}</span>
                </div>
              ))}
            </div>
          </div>
          <div class="absolute top-0 right-0 w-full h-full rounded-3xl -rotate-6 -z-10" style="background-color: var(--accent-primary);"></div>
        </div>
      </div>
    </section>
  </main>

  <FooterNav />
</BaseLayout>
