---
/**
 * FastFoodChain.astro — T7 Fast Food Chain page template
 * Converted from: fast_food_chain__t7_.html (Panera example)
 */
import BaseLayout from '../layouts/BaseLayout.astro';

export interface MenuItem {
  id: number;
  name: string;
  protein: number;
  cals: number;
  fiber?: number;
  type: string;
  best?: boolean;
  orderTip?: string;
}

export interface MenuHack {
  number: string;
  title: string;
  description: string;
}

export interface ChainLink {
  href: string;
  label: string;
  sublabel: string;
}

export interface Props {
  title: string;
  description?: string;
  canonicalUrl?: string;
  chainName: string;
  chainSlug: string;
  headline: string;
  headlineAccent: string;
  subheadline: string;
  proteinRange: string;
  calorieBand: string;
  menuItems?: MenuItem[];
  menuHacks?: MenuHack[];
  relatedChains?: ChainLink[];
  filterCategories?: string[];
}

const {
  title,
  description,
  canonicalUrl,
  chainName,
  chainSlug,
  headline,
  headlineAccent,
  subheadline,
  proteinRange = '25g - 52g',
  calorieBand = '420 - 950',
  menuItems = [],
  menuHacks = [],
  relatedChains = [],
  filterCategories = ['salad', 'sandwich', 'bowl'],
} = Astro.props;
---

<BaseLayout title={title} description={description} canonicalUrl={canonicalUrl}>
    <!-- Navigation -->
    <nav class="sticky top-0 z-40 w-full border-b border-black/5 bg-white/80 backdrop-blur-md px-6 py-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <a href="/" class="flex items-center gap-4">
                <div class="w-10 h-10 bg-slate-900 flex items-center justify-center rounded-lg text-white font-bold text-xl">M</div>
                <div class="flex flex-col leading-none">
                    <span class="font-extrabold tracking-tighter text-xl uppercase">Systemic Meals</span>
                    <span class="text-[9px] font-bold tracking-[0.2em] opacity-40 uppercase">High Protein Hierarchy</span>
                </div>
            </a>
            <div class="hidden md:flex gap-8 text-[10px] font-black uppercase tracking-widest opacity-60">
                <a href="/high-protein/chain/" class="hover:text-orange-500 transition-colors">Chain Guides</a>
                <a href="/high-protein/store/" class="hover:text-orange-500 transition-colors">Store Audits</a>
            </div>
        </div>
    </nav>

    <main class="flex-grow" x-data={`{
        filter: 'all',
        items: ${JSON.stringify(menuItems)}
    }`}>
        <!-- Hero -->
        <header class="bg-white border-b border-black/5 pt-16 pb-24 px-6">
            <div class="max-w-7xl mx-auto flex flex-col md:flex-row md:items-end justify-between gap-8">
                <div class="max-w-2xl">
                    <nav class="flex items-center gap-2 mb-8">
                        <span class="label-text">Hierarchy</span>
                        <span class="text-[10px] font-bold opacity-30">/</span>
                        <span class="text-[10px] font-black opacity-40 uppercase tracking-widest">High Protein</span>
                        <span class="text-[10px] font-bold opacity-30">/</span>
                        <span class="text-[10px] font-black opacity-40 uppercase tracking-widest">Chain</span>
                    </nav>
                    <h1 class="text-6xl md:text-8xl font-black tracking-tighter leading-[0.85] text-slate-900 mb-6">
                        {headline} <br><span class="text-orange-500 underline decoration-4 underline-offset-8">{headlineAccent}</span>
                    </h1>
                    <p class="text-xl opacity-60 font-medium max-w-lg">{subheadline}</p>
                </div>
                <div class="pantry-card rounded-3xl p-8 bg-slate-900 text-white min-w-[320px]">
                    <span class="label-text !bg-slate-800 !text-white !border-orange-500 mb-4">Chain Macro Ranges</span>
                    <div class="space-y-4 mt-6">
                        <div class="flex justify-between items-center">
                            <span class="text-sm font-bold opacity-60">Protein Range</span>
                            <span class="text-xl font-black">{proteinRange}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm font-bold opacity-60">Calorie Band</span>
                            <span class="text-xl font-black">{calorieBand}</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Menu Grid -->
        <section class="max-w-7xl mx-auto py-20 px-6">
            <div class="flex flex-wrap gap-2 mb-12">
                <button @click="filter = 'all'" x-bind:class="filter === 'all' ? 'bg-slate-900 text-white' : ''" class="px-6 py-2 rounded-full border border-black/10 bg-white text-[10px] font-black uppercase tracking-widest transition-all">All Items</button>
                {filterCategories.map((cat) => (
                    <button @click={`filter = '${cat}'`} x-bind:class={`filter === '${cat}' ? 'bg-slate-900 text-white' : ''`} class="px-6 py-2 rounded-full border border-black/10 bg-white text-[10px] font-black uppercase tracking-widest transition-all capitalize">{cat}s</button>
                ))}
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <template x-for="item in items" x-bind:key="item.id">
                    <div x-show="filter === 'all' || item.type === filter" x-transition class="pantry-card rounded-3xl p-8 flex flex-col justify-between group">
                        <div>
                            <div class="flex justify-between items-start mb-6">
                                <span class="label-text" x-text="item.type"></span>
                                <template x-if="item.best">
                                    <span class="text-[9px] font-bold text-orange-500 border border-orange-500/20 px-2 py-0.5 rounded">SYSTEM PICK</span>
                                </template>
                            </div>
                            <h3 class="text-2xl font-black leading-tight mb-4 group-hover:text-orange-600 transition-colors" x-text="item.name"></h3>
                            <div class="flex gap-4 mb-8">
                                <div class="flex flex-col">
                                    <span class="text-[9px] font-bold opacity-40 uppercase">Protein</span>
                                    <span class="text-xl font-black" x-text="item.protein + 'g'"></span>
                                </div>
                                <div class="w-px h-10 bg-black/5"></div>
                                <div class="flex flex-col">
                                    <span class="text-[9px] font-bold opacity-40 uppercase">Cals</span>
                                    <span class="text-xl font-black" x-text="item.cals"></span>
                                </div>
                            </div>
                        </div>
                        <button class="btn-system bg-slate-900 text-white py-3 rounded-xl font-bold text-xs uppercase tracking-widest group-hover:bg-orange-600 w-full">
                            Detailed Audit
                        </button>
                    </div>
                </template>
            </div>
        </section>

        <!-- Menu Hacks -->
        {menuHacks.length > 0 && (
            <section class="bg-slate-900 text-white py-24 px-6 relative overflow-hidden">
                <div class="max-w-7xl mx-auto grid md:grid-cols-2 gap-16 items-center">
                    <div>
                        <span class="label-text !bg-white/10 !text-white !border-orange-500 mb-6">System Overrides</span>
                        <h2 class="text-5xl font-black tracking-tighter mb-8 leading-none">How to Hack <br>the Menu.</h2>
                        <div class="space-y-6">
                            {menuHacks.map((hack) => (
                                <div class="flex gap-6">
                                    <div class="w-12 h-12 shrink-0 rounded-full border border-white/20 flex items-center justify-center font-black">{hack.number}</div>
                                    <div>
                                        <h4 class="font-bold text-xl mb-1">{hack.title}</h4>
                                        <p class="opacity-60 text-sm">{hack.description}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            </section>
        )}

        <!-- Related Chains -->
        {relatedChains.length > 0 && (
            <section class="max-w-7xl mx-auto py-24 px-6">
                <span class="label-text mb-6">Nearby Alternatives</span>
                <h3 class="text-3xl font-black mb-12">More High-Protein Audits.</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    {relatedChains.map((chain) => (
                        <a href={chain.href} class="pantry-card rounded-2xl p-6 hover:border-orange-500 transition-all group">
                            <span class="text-xs font-black opacity-30 block mb-2 uppercase">{chain.sublabel}</span>
                            <span class="text-xl font-black group-hover:text-orange-600">{chain.label} →</span>
                        </a>
                    ))}
                </div>
            </section>
        )}
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-white py-16 px-6">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-8">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-white text-slate-900 flex items-center justify-center rounded-md font-black">M</div>
                <span class="font-black text-xl tracking-tighter uppercase">The System Network</span>
            </div>
            <p class="text-[10px] font-bold text-slate-500 tracking-widest uppercase">© 2024 Systemic Meals Network. Data verified weekly.</p>
        </div>
    </footer>
</BaseLayout>
