---
import BaseLayout from '@mealprepideas/shared/layouts/BaseLayout.astro';
import HighProteinRecipe from '@mealprepideas/shared/components/HighProteinRecipe.astro';
import { recipes } from '@mealprepideas/shared/data/content/recipes';
import { getRelatedRecipes } from '@mealprepideas/shared/utils/content';

export function getStaticPaths() {
  return recipes
    .filter(r => r.hub === 'high-protein')
    .map(recipe => ({
      params: { slug: recipe.slug },
      props: { recipe },
    }));
}

const { recipe } = Astro.props;
const related = getRelatedRecipes(recipe, 4);
---
<BaseLayout title={`${recipe.title} | ProteinMeals.co`} description={recipe.description}>
  <HighProteinRecipe recipe={recipe} relatedRecipes={related} />
</BaseLayout>
